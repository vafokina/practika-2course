@model DeliveryServiceWebDBServer.Models.Constructor
@using DeliveryServiceWebDBServer.Models

@{

    ViewBag.Title = "Расширенный поиск";
}


<div class="panel panel-default tabs">
    <ul class="nav nav-tabs" role="tablist">
        <li><a href="~/Admin/Index">Работа с данными</a></li>
        <li class="active"><a href="~/Constructor/Index" role="tab" data-toggle="tab">Расширенный поиск</a></li>
    </ul>
    <div class="panel-body tab-content">
        <div class="tab-pane" id="tab-first">  </div>
        <div class="tab-pane active" id="tab-second">
            <fieldset>
                <legend>Задайте условия (необязательно):</legend>
                @foreach (string t in Model.SelectedAttributes)
                {
                    if (t != "НомерРегионаГорода" && t != "НомерГородаПВ" && t != "НомерГородаКлиента" && t != "НомерПВКлиента"
                        && t != "НомерОтправителя" && t != "НомерПолучателя" && t != "НомерТарифаОтправления" && t != "НомерСтраныРегиона")
                    {
                        string[] intAttributes = { "НомерГорода", "НомерСтраны", "НомерПВ", "НомерКлиента", "НомерОтправления", "КоличествоМест", "НомерЗаписи", "НомерРегиона", "НомерТарифа" };
                        using (Html.BeginForm("Index4", "Constructor"))
                        {
                            <div class="form-group">
                                <div class="row">
                                    @Html.HiddenFor(model => model.Attributes)
                                    @Html.HiddenFor(model => model.References)
                                    @Html.HiddenFor(model => model.SelectedTables)
                                    @Html.HiddenFor(model => model.SelectedAttributes)
                                    @Html.HiddenFor(model => model.SelectedReferences)
                                    <div class="col-md-5">
                                        @Html.Label(t, htmlAttributes: new { @class = "control-label col-md-2", @id = "NameCondition" })
                                    </div>

                                    @if (intAttributes.Contains(t))
                                    {
                                        <div class="col-md-10">
                                            <select class="form-control" id="CityId" name="CityId">
                                                <option value="=">=</option>
                                                <option value=">">></option>
                                                <option value="<"><</option>
                                            </select>
                                        </div>
                                        <div class="col-md-10">
                                            @Html.EditorFor(model => model.IntCondition, new { htmlAttributes = new { @class = "form-control" } })
                                        </div>
                                    }
                                    else if (t == "Вес" || t == "Длина" || t == "Ширина" || t == "Высота"
                                        || t == "Стоимость" || t == "ОбъявленнаяСтоимость")
                                    {
                                        <div class="col-md-10">
                                            <select class="form-control" id="CityId" name="CityId">
                                                <option value="=">=</option>
                                                <option value=">">></option>
                                                <option value="<"><</option>
                                            </select>
                                        </div>
                                        <div class="col-md-10">
                                            @Html.EditorFor(model => model.DoubleCondition, new { htmlAttributes = new { @class = "form-control" } })
                                        </div>
                                    }
                                    else if (t == "ДатаВремяЗаписи")
                                    {
                                        <div class="col-md-10">
                                            <select class="form-control" id="CityId" name="CityId">
                                                <option value="=">=</option>
                                                <option value=">">></option>
                                                <option value="<"><</option>
                                            </select>
                                        </div>
                                        <div class="col-md-10">
                                            @Html.EditorFor(model => model.DataTimeCondition, new { htmlAttributes = new { @class = "form-control" } })
                                        </div>
                                    }
                                    else
                                    {
                                        <div class="col-md-10">
                                            @Html.EditorFor(model => model.StringCondition, new { htmlAttributes = new { @class = "form-control" } })
                                        </div>
                                    }
                                    <div class="col-md-5">
                                        <input type="submit" class="btn btn-default" value="Добавить" />
                                    </div>
                                </div>
                            </div>
                        }
                    }
                }
                <br>
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                <a class="btn btn-default" href="~/Constructor/Index5">Далее</a>
            </fieldset>

            @helper Condition(string t)
            {
                string[] intAttributes = { "НомерГорода", "НомерСтраны", "НомерПВ", "НомерКлиента", "НомерОтправления", "КоличествоМест", "НомерЗаписи", "НомерРегиона", "НомерТарифа" };
                using (Html.BeginForm("Index4", "Constructor"))
                {
                    <div class="form-group">
                        <div class="row">
                            @Html.HiddenFor(model => model.Attributes)
                            @Html.HiddenFor(model => model.References)
                            @Html.HiddenFor(model => model.SelectedTables)
                            @Html.HiddenFor(model => model.SelectedAttributes)
                            @Html.HiddenFor(model => model.SelectedReferences)
                            <div class="col-md-5">
                                @Html.Label(t, htmlAttributes: new { @class = "control-label col-md-2", @id = "NameCondition" })
                            </div>

                            @if (intAttributes.Contains(t))
                            {
                                <div class="col-md-10">
                                    <select class="form-control" id="CityId" name="CityId">
                                        <option value="=">=</option>
                                        <option value=">">></option>
                                        <option value="<"><</option>
                                    </select>
                                </div>
                                <div class="col-md-10">
                                    @Html.EditorFor(model => model.IntCondition, new { htmlAttributes = new { @class = "form-control" } })
                                </div>
                            }
                            else if (t == "Вес" || t == "Длина" || t == "Ширина" || t == "Высота"
                                || t == "Стоимость" || t == "ОбъявленнаяСтоимость")
                            {
                                <div class="col-md-10">
                                    <select class="form-control" id="CityId" name="CityId">
                                        <option value="=">=</option>
                                        <option value=">">></option>
                                        <option value="<"><</option>
                                    </select>
                                </div>
                                <div class="col-md-10">
                                    @Html.EditorFor(model => model.DoubleCondition, new { htmlAttributes = new { @class = "form-control" } })
                                </div>
                            }
                            else if (t == "ДатаВремяЗаписи")
                            {
                                <div class="col-md-10">
                                    <select class="form-control" id="CityId" name="CityId">
                                        <option value="=">=</option>
                                        <option value=">">></option>
                                        <option value="<"><</option>
                                    </select>
                                </div>
                                <div class="col-md-10">
                                    @Html.EditorFor(model => model.DataTimeCondition, new { htmlAttributes = new { @class = "form-control" } })
                                </div>
                            }
                            else
                            {
                                <div class="col-md-10">
                                    @Html.EditorFor(model => model.StringCondition, new { htmlAttributes = new { @class = "form-control" } })
                                </div>
                            }
                            <div class="col-md-5">
                                <input type="submit" class="btn btn-default" value="Добавить" />
                            </div>
                        </div>
                    </div>
                }
            }

        </div>
    </div>
</div>
